<!DOCTYPE html>
<html lang="en">
<head>
    <title>OLIVIA COVID-19 Monitor for US Counties</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="{{url_for('static', filename='images/form/icons/favicon.ico')}}"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{{url_for('static', filename='vendor/bootstrap/css/bootstrap.min.css')}}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{{url_for('static', filename='fonts/form/font-awesome-4.7.0/css/font-awesome.min.css')}}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='vendor/animate/animate.css')}}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{{url_for('static', filename='vendor/css-hamburgers/hamburgers.min.css')}}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='vendor/select2/select2.min.css')}}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/form/util.css')}}">
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/form/main.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layouts/blog.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layouts/grapher.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/grapher.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/d3_grapher.js') }}"></script>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300" rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>

    <!--===============================================================================================-->
</head>
<body>

<div class="bg-contact2" style="background-image: url('{{ url_for('static', filename='images/form/olives.jpg') }}');">
    <div class="container-contact2">
        <div class="wrap-contact2" style="width: 1500px">
<!--            <form class="contact2-form validate-form">-->
					<span class="contact2-form-title">
						Region-based COVID-19 Outbreak Monitor
					</span>

                <div>
                    <div>
                        <p>
                            {% if not json_data == '' %}
                                {#                                    <img class="viscenter" src="{{ url_for('static', filename=output) }}" width="80%"#}
                                {#                                         height="80%"/>#}

                                <div style="min-width: 1010px; min-height: 804px;">
                                    <svg id="visual" width="1200" height="800" style="width: 1200px; background: #fff;stop-color: white; fill-: white; background-color: white; margin: 20px;"/>
                                </div>

                                <div>Interesting result? <a href="{{ url_for('contact.send_finding') }}">Share it with everyone!</a></div>

                                {#                                <div><button class="downloadButton" onclick="window.location.href = '{{ url_for('static', filename=download_link) }}';"><i class="fa fa-download"></i>Data</button></div>#}

                            {% else %}
                                <p class="descriptionEr">Please click plot to continue.</p>
                            {% endif %}
                        </p>
                    </div>
                    <div class="post-description">
                        <form action="" method="post" id="submission_form" onsubmit="$('.modal').show();" novalidate>
                            {{ form.hidden_tag() }}
                            <p>
                                {{ form.x_var.label }}<br>
                                {{ form.x_var() }}<br>
                                {% for error in form.x_var.errors %}
                                    <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}
                            </p>
                            <p>
                                {{ form.y_var.label }}<br>
                                {{ form.y_var() }}<br>
                                {% for error in form.y_var.errors %}
                                    <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}
                            </p>
                            <p>
                                {{ form.color_var.label }}<br>
                                {{ form.color_var() }}<br>
                                {% for error in form.color_var.errors %}
                                    <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}
                            </p>
                            <p>
                                {{ form.size_var.label }}<br>
                                {{ form.size_var() }}<br>
                                {% for error in form.size_var.errors %}
                                    <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}
                            </p>
                            <p>
                                {{ form.show_labels.label }}<br>
                                {{ form.show_labels() }}<br>
                                {% for error in form.show_labels.errors %}
                                    <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}
                            </p>
                            <p>
                                {{ form.resolution.label }}<br>
                                <div class="wrap-input2 validate-input" data-validate="Message is required">
                                    {{ form.resolution(class_="input2") }}<br>
                                <span class="focus-input2" data-placeholder=""></span></div>
                                {% for error in form.resolution.errors %}
                                    <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}
                            </p>
                            <p>
                                {{ form.state_filter.label }}<br>
                                <div class="wrap-input2 validate-input" data-validate="Text is required">
                                    {{ form.state_filter(class_="input2") }}<span class="focus-input2"
                                                                                data-placeholder=""></span>
                                </div>

                                <br>
                                {% for error in form.state_filter.errors %}
                                <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}
                            </p>
                            <p>
                                {{ form.county_filter.label }}<br>
                                <div class="wrap-input2 validate-input" data-validate="Text is required">
                                    {{ form.county_filter(class_="input2") }}<span class="focus-input2"
                                                                                data-placeholder=""></span>
                                </div>

                                <br>
                                {% for error in form.county_filter.errors %}
                                <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}
                            </p>
                            <p>{{ form.submit(type="submit", class="contact2-form-btn", style="height: 10px, width: 10px") }}</p>
                        </form>
                    <p>
    By <a href="http://er.cs.ucla.edu" class="post-author">ER Lab</a>
                    </p>
                    </div>
                    <div class="modal">Generating the results, Please wait...</div>
                </div>
            {% if not data == {} %}
<!--        <div class="wrap-contact2">-->
		<div class="radarChart"></div>
<!--            </div>-->
		{% endif %}
<!--            </form>-->
        </div>



    </div>

<script>
        data = {{json_data | safe}};

        var chart = new Grapher.MotionChart(document.getElementById("visual"));
         chart.dataSource = data;
        label_show = "{{ show_labels }}" == "show";
        if (label_show)
            chart.labelData = "location";
        chart.xData = "{{ x_var }}";
        chart.yData = "{{ y_var }}";
        chart.radiusData = "{{ size_var }}";
        chart.colorData = "{{ color_var }}";
        chart.xScale = d3.scale.linear();
        chart.draw();

    </script>
</div>

<script src="{{url_for('static', filename='js/radarChart.js')}}"></script>
		<script>

      /* Radar chart design created by Nadieh Bremer - VisualCinnamon.com */

			//////////////////////////////////////////////////////////////
			//////////////////////// Set-Up //////////////////////////////
			//////////////////////////////////////////////////////////////

			var margin = {top: 100, right: 100, bottom: 100, left: 100},
				width = Math.min(700, window.innerWidth - 10) - margin.left - margin.right,
				height = Math.min(width, window.innerHeight - margin.top - margin.bottom - 20);

			//////////////////////////////////////////////////////////////
			////////////////////////// Data //////////////////////////////
			//////////////////////////////////////////////////////////////

			// var data = [
			// 		  [//iPhone
			// 			{"axis":"Hate","value":0.95},
			// 			{"axis":"Counter-Hate","value":0.03},
			// 			{"axis":"Neutral","value":0.03},
			// 			{"axis":"Other","value":0.02},
			// 		  ],
			// 		];
	  		var data = [{{ data | safe }}];
			//////////////////////////////////////////////////////////////
			//////////////////// Draw the Chart //////////////////////////
			//////////////////////////////////////////////////////////////

			var color = d3.scale.ordinal()
				.range(["#CC333F", "#EDC951","#00A0B0"]);

			var radarChartOptions = {
			  w: width,
			  h: height,
			  margin: margin,
			  maxValue: 0.5,
			  levels: 5,
			  roundStrokes: true,
			  color: color
			};
			//Call function to draw the Radar chart
			RadarChart(".radarChart", data, radarChartOptions);
		</script>



<!--===============================================================================================-->
<script src="{{url_for('static', filename='vendor/jquery/jquery-3.2.1.min.js')}}"></script>
<!--===============================================================================================-->
<script src="{{url_for('static', filename='vendor/bootstrap/js/popper.js')}}"></script>
<script src="{{url_for('static', filename='vendor/bootstrap/js/bootstrap.min.js')}}"></script>
<!--===============================================================================================-->
<script src="{{url_for('static', filename='vendor/select2/select2.min.js')}}"></script>
<!--===============================================================================================-->
<script src="{{url_for('static', filename='js/forms/main.js')}}"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'UA-23581568-13');
</script>

</body>
</html>
